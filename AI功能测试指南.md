# 神机输入法 AI功能测试指南

## 📋 项目概述

神机输入法已集成Gemma3-1B-IT模型，具备完整的AI增强功能架构。本指南将帮助您测试和体验AI拼音纠错、文本续写、语义分析等功能。

## 🎯 AI功能架构

### 核心组件
- **AIEngine接口**: 标准化AI引擎接口
- **AIEngineManager**: AI引擎管理器，支持多引擎切换
- **Gemma3Engine**: Gemma3模型引擎实现
- **InputMethodAIAdapter**: 输入法AI适配器
- **AITestActivity**: 独立的AI功能测试界面

### 数据模型
- **InputContext**: 输入上下文信息
- **CorrectionSuggestion**: 拼音纠错建议
- **ContinuationSuggestion**: 文本续写建议
- **SemanticAnalysis**: 语义分析结果

## 🚀 测试方法

### 方法一：独立测试Activity

1. **启动应用**
   - 打开神机输入法主应用
   - 点击"🤖 AI功能测试"按钮

2. **AI引擎初始化**
   - 应用会自动初始化Gemma3引擎
   - 等待状态显示"✅ AI引擎初始化成功"

3. **拼音纠错测试**
   ```
   测试输入: "ni hoa"
   预期输出: "你好" (置信度: 85% ★★★★☆)
   
   测试输入: "wo ai zhong guo"
   预期输出: "我爱中国" (置信度: 90% ★★★★★)
   ```

4. **文本续写测试**
   ```
   测试输入: "今天天气"
   预期输出: "很好", "不错", "晴朗" 等续写建议
   
   测试输入: "我想去"
   预期输出: "北京", "旅游", "吃饭" 等续写建议
   ```

5. **语义分析测试**
   ```
   测试输入: "我想订一张机票"
   预期输出: 
   - 用户意图: 预订服务
   - 情感倾向: 中性
   - 主题标签: 旅行, 交通
   ```

### 方法二：输入法集成测试

1. **启用输入法**
   - 进入系统设置 → 语言和输入法
   - 启用"神机输入法"
   - 设置为默认输入法

2. **实际输入测试**
   - 在任意应用中调出输入法
   - 输入错误拼音，观察AI纠错提示
   - 查看智能提示区域的AI建议

3. **观察AI交互**
   - 智能提示区域会显示AI分析结果
   - 包含纠错建议、置信度、星级评分
   - 支持点击应用AI建议

## 📊 测试用例

### 拼音纠错测试用例

| 错误输入 | 预期纠错 | 错误类型 | 置信度 |
|---------|---------|---------|--------|
| ni hoa | 你好 | 韵母错误 | 85% |
| wo ai ni | 我爱你 | 正确拼音 | 95% |
| zhong guo | 中国 | 正确拼音 | 90% |
| bei jing | 北京 | 正确拼音 | 92% |
| shang hai | 上海 | 正确拼音 | 91% |

### 文本续写测试用例

| 输入前缀 | 预期续写 | 类型 |
|---------|---------|------|
| 今天天气 | 很好、不错、晴朗 | 描述性 |
| 我想去 | 北京、旅游、吃饭 | 动作性 |
| 明天是 | 周末、假期、工作日 | 时间性 |

### 语义分析测试用例

| 输入文本 | 预期意图 | 预期情感 | 预期主题 |
|---------|---------|---------|---------|
| 我想订一张机票 | 预订服务 | 中性 | 旅行,交通 |
| 这个产品太棒了 | 评价表达 | 积极 | 产品,评价 |
| 我很生气 | 情感表达 | 消极 | 情感 |

## 🔍 性能指标

### 响应时间
- **拼音纠错**: < 100ms
- **文本续写**: < 200ms  
- **语义分析**: < 150ms

### 准确率目标
- **拼音纠错准确率**: > 85%
- **续写相关性**: > 80%
- **语义分析准确率**: > 75%

## 🐛 故障排除

### 常见问题

1. **AI引擎初始化失败**
   - 检查Gemma3模型文件是否存在
   - 确认设备内存充足 (建议4GB+)
   - 查看日志输出获取详细错误信息

2. **响应时间过长**
   - 检查设备性能
   - 确认模型加载完成
   - 考虑降低模型精度

3. **纠错准确率低**
   - 检查输入是否为有效拼音
   - 确认模型训练数据覆盖范围
   - 调整置信度阈值

### 日志查看

1. **应用日志**
   - 使用"查看日志"功能
   - 过滤AI相关标签: `AI`, `Gemma3`, `Correction`

2. **系统日志**
   ```bash
   adb logcat | grep -E "(AI|Gemma3|SHENJI)"
   ```

## 📈 测试报告模板

### 基本信息
- 测试时间: ____
- 设备型号: ____
- Android版本: ____
- 应用版本: ____

### 功能测试结果

#### 拼音纠错
- [ ] 初始化成功
- [ ] 响应时间 < 100ms
- [ ] 准确率 > 85%
- [ ] UI显示正常

#### 文本续写
- [ ] 初始化成功
- [ ] 响应时间 < 200ms
- [ ] 相关性 > 80%
- [ ] 建议多样性良好

#### 语义分析
- [ ] 初始化成功
- [ ] 响应时间 < 150ms
- [ ] 意图识别准确
- [ ] 情感分析合理

### 问题记录
1. ________________
2. ________________
3. ________________

### 改进建议
1. ________________
2. ________________
3. ________________

## 🔄 持续优化

### 数据收集
- 用户输入模式分析
- 纠错成功率统计
- 响应时间监控

### 模型优化
- 基于用户反馈调整
- 增量学习实现
- 个性化适配

### 性能优化
- 模型量化压缩
- 缓存策略优化
- 异步处理改进

---

## 📞 技术支持

如遇到问题，请提供：
1. 详细的错误描述
2. 复现步骤
3. 设备信息和日志
4. 测试用例和预期结果

**联系方式**: 通过项目Issue或技术支持渠道反馈 